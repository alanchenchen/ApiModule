!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).ApiModule={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function t(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}var r=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},n=Object.prototype.toString;function o(e){return"[object Array]"===n.call(e)}function i(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===n.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var c={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:i,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:s,isStream:function(e){return a(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)u(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,o=arguments.length;n<o;n++)u(arguments[n],r);return t},extend:function(e,t,n){return u(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function f(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l(){this.handlers=[]}l.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},l.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},l.prototype.forEach=function(e){c.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var p=l,d=function(e,t,r){return c.forEach(r,(function(r){e=r(e,t)})),e},h=function(e){return!(!e||!e.__CANCEL__)},m="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function g(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}var b=g,w=y;function v(e){if(b===setTimeout)return setTimeout(e,0);if((b===g||!b)&&setTimeout)return b=setTimeout,setTimeout(e,0);try{return b(e,0)}catch(t){try{return b.call(null,e,0)}catch(t){return b.call(this,e,0)}}}"function"==typeof m.setTimeout&&(b=setTimeout),"function"==typeof m.clearTimeout&&(w=clearTimeout);var j,O=[],E=!1,T=-1;function C(){E&&j&&(E=!1,j.length?O=j.concat(O):T=-1,O.length&&x())}function x(){if(!E){var e=v(C);E=!0;for(var t=O.length;t;){for(j=O,O=[];++T<t;)j&&j[T].run();T=-1,t=O.length}j=null,E=!1,function(e){if(w===clearTimeout)return clearTimeout(e);if((w===y||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(e);try{w(e)}catch(t){try{return w.call(null,e)}catch(t){return w.call(this,e)}}}(e)}}function S(e,t){this.fun=e,this.array=t}S.prototype.run=function(){this.fun.apply(null,this.array)};function A(){}var R=A,B=A,P=A,q=A,N=A,_=A,k=A;var L=m.performance||{},U=L.now||L.mozNow||L.msNow||L.oNow||L.webkitNow||function(){return(new Date).getTime()};var I=new Date;var D={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];O.push(new S(e,t)),1!==O.length||E||v(x)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:R,addListener:B,once:P,off:q,removeListener:N,removeAllListeners:_,emit:k,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*U.call(L),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-I)/1e3}},F=require("./utils"),M=require("./helpers/normalizeHeaderName"),H={"Content-Type":"application/x-www-form-urlencoded"};function z(e,t){!F.isUndefined(e)&&F.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var J,V={adapter:("undefined"!=typeof XMLHttpRequest?J=require("./adapters/xhr"):void 0!==D&&"[object process]"===Object.prototype.toString.call(D)&&(J=require("./adapters/http")),J),transformRequest:[function(e,t){return M(t,"Accept"),M(t,"Content-Type"),F.isFormData(e)||F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)?e:F.isArrayBufferView(e)?e.buffer:F.isURLSearchParams(e)?(z(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):F.isObject(e)?(z(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};V.headers={common:{Accept:"application/json, text/plain, */*"}},F.forEach(["delete","get","head"],(function(e){V.headers[e]={}})),F.forEach(["post","put","patch"],(function(e){V.headers[e]=F.merge(H)})),module.exports=V;var X=Object.freeze({__proto__:null});function $(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var G=function(e){return $(e),e.headers=e.headers||{},e.data=d(e.data,e.headers,e.transformRequest),e.headers=c.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),c.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||X.adapter)(e).then((function(t){return $(e),t.data=d(t.data,t.headers,e.transformResponse),t}),(function(t){return h(t)||($(e),t&&t.response&&(t.response.data=d(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},K=function(e,t){t=t||{};var r={},n=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];c.forEach(n,(function(e){void 0!==t[e]&&(r[e]=t[e])})),c.forEach(o,(function(n){c.isObject(t[n])?r[n]=c.deepMerge(e[n],t[n]):void 0!==t[n]?r[n]=t[n]:c.isObject(e[n])?r[n]=c.deepMerge(e[n]):void 0!==e[n]&&(r[n]=e[n])})),c.forEach(i,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var a=n.concat(o).concat(i),s=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return c.forEach(s,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r};function Q(e){this.defaults=e,this.interceptors={request:new p,response:new p}}Q.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=K(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[G,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Q.prototype.getUri=function(e){return function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(c.isURLSearchParams(t))n=t.toString();else{var o=[];c.forEach(t,(function(e,t){null!=e&&(c.isArray(e)?t+="[]":e=[e],c.forEach(e,(function(e){c.isDate(e)?e=e.toISOString():c.isObject(e)&&(e=JSON.stringify(e)),o.push(f(t)+"="+f(e))})))})),n=o.join("&")}if(n){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}((e=K(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},c.forEach(["delete","get","head","options"],(function(e){Q.prototype[e]=function(t,r){return this.request(c.merge(r||{},{method:e,url:t}))}})),c.forEach(["post","put","patch"],(function(e){Q.prototype[e]=function(t,r,n){return this.request(c.merge(n||{},{method:e,url:t,data:r}))}}));var W=Q;function Y(e){this.message=e}Y.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Y.prototype.__CANCEL__=!0;var Z=Y;function ee(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new Z(e),t(r.reason))}))}ee.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ee.source=function(){var e;return{token:new ee((function(t){e=t})),cancel:e}};var te=ee;function re(e){var t=new W(e),n=r(W.prototype.request,t);return c.extend(n,W.prototype,t),c.extend(n,t),n}var ne=re(X);ne.Axios=W,ne.create=function(e){return re(K(ne.defaults,e))},ne.Cancel=Z,ne.CancelToken=te,ne.isCancel=h,ne.all=function(e){return Promise.all(e)},ne.spread=function(e){return function(t){return e.apply(null,t)}};var oe=ne,ie=ne;oe.default=ie;var ae=oe;const se={method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};const ue=ae;e.axios=ue,e.default=
/**!
     *
     * @name ApiModule
     * @author Alan chen
     * @since 2020/2/21
     * @license Anti996
     */
class{constructor(e,r={dynamicRouterPattern:":pattern"}){this.version=require("../package.json").version,this.createdBy="alanchenchen@github.com",this.moduleApiInfo=[],this.globalApiInfo={},this.globalConfig={},this.request=({url:e,data:r,dynamicRouterParams:n,module:o})=>{const i=Boolean(o)||e.includes("->"),a=o||e.split("->")[0].trim(),s=e.includes("->")&&e.split("->")[1].trim()||e,u=i?this.moduleApiInfo.find(e=>e.name==a).module:this.globalApiInfo;if(!Boolean(u[s]))throw new Error("could not find the request url, please check whether you register module");const c=u[s],{url:f}=c,l=t(c,["url"]),{headers:p}=l,d=t(l,["headers"]);let h=Object.assign(Object.assign({},this.globalConfig),d);return h.headers=Object.assign(Object.assign({},h.headers),p),this._base(f,r,n,h)},this._preConfigs=r,this._init(e)}_init(e={}){this.globalConfig=Object.assign(Object.assign({},se),e)}_base(e,t,r,n){const o=Boolean(n.dynamicRouter),i=n.method.toUpperCase();let a={},s=e;if(o){if("[object Object]"!=Object.prototype.toString.call(r))throw new Error("when you use dynamicRouter params request, data must be object");Object.entries(r).forEach(e=>{const t=this._preConfigs.dynamicRouterPattern.replace(new RegExp("pattern","g"),e[0]),r=new RegExp(`(${t})`,"g");s=s.replace(r,e[1])})}if(Boolean(t)){a=["PUT","POST","PATCH"].includes(i)?{data:t}:{params:t}}return ae(Object.assign(Object.assign(Object.assign({url:s},a),n),{transformRequest:[e=>{let t;switch(n.headers["Content-Type"]){case"application/x-www-form-urlencoded":let r="";for(let t in e)r+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);t=r.substring(1);break;case"application/json":t=JSON.stringify(e);break;default:t=e}return t}]}))}registerGlobal(e){return this.globalApiInfo=e,this}registerModule({name:e,module:t}){if(Boolean(e)&&"string"==typeof e)return this.moduleApiInfo.push({name:e,module:t}),this;throw new Error("if you use the module, the module name is necessary")}setHeader(...e){if(1==e.length&&"object"==typeof e)for(const t of Object.keys(e[0]))this.globalConfig.headers[t]=e[0][t];else{if(2!=e.length)throw new Error("the maximum length of arguments is 2, if there is only one, it must be object ");this.globalConfig.headers[e[0]]=e[1]}return this}},Object.defineProperty(e,"__esModule",{value:!0})}));
